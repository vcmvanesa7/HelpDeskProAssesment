# HelpDeskPro - Admin Dashboard

## Description

HelpDeskPro is a web application developed to efficiently manage customer and agent support tickets within a company. The application allows users to create, assign, and manage support tickets, while agents can manage tickets, respond to them, and update their status.

## Technologies Used

- **Next.js** (for application structure and routing)
- **React** (for the user interface)
- **TypeScript** (strong typing)
- **MongoDB** and **Mongoose** (for the database)
- **NextAuth.js** (for user role authentication)
- **Axios** (for API requests)
- **Material UI** (for the UI and predefined components)
- **Cron jobs** (for scheduled tasks such as reminders for unanswered tickets)

## Main Features

### Ticket Management
- **Customers** can create new tickets with a title, description, priority, and status.

- **Agents** can edit ticket statuses, assign tickets to other agents, and reply with comments.

- Tickets have a **comment thread** so that both customers and agents can communicate.

- Tickets can be listed and filtered by status and priority.

### User Management and Authentication
- Users can authenticate using **NextAuth.js** with credentials or Google OAuth.

- The **user roles** are: **client** (clients), **agent** (support agents), and **admin** (administrators).

- Users are redirected to their dashboard according to their role.

**Route Protection**: Clients can only access their own tickets, while agents can access all tickets.

### Email Notifications
- **Automatic emails** are sent to the client when:

- A ticket is created.

- An agent responds to a ticket.

- A ticket is closed.

### Cron Jobs
- A **cron job** runs a periodic task to check for unanswered tickets and send reminders to assigned agents.

## Project Structure

```bash
src/
├── app/
│ ├── admin/
│ │ ├── agents
│ │ ├── Dashboard.module.css
│ │ ├── layout.tsx
│ │ ├── page.tsx
│ │ ├── support
│ │ └── users
│ ├── agent
│ ├── api
│ ├── auth
│ ├── favicon.ico
│ ├── globals.css
│ ├── LandingAnimated.tsx
│ ├── layout.tsx
│ ├── page.tsx
│ ├── profile
│ ├── providers.tsx
│ └── support
│ ├── [id]
│ ├── new
│ └── page.tsx
├── components
│ ├── clientToaster.tsx
│ ├── layout
│ ├── ui
├── lib
│ ├── auth.ts
│ ├── bcrypt.ts
│ ├── cloudinary.ts
│ ├── db.ts
│ ├── handleApiError.ts
│ ├── mailer.ts
│ └── validators
├── schemas
├── services
├── types
├── useful
└── tsconfig.json
```

## API endpoints

### `/api/admin/agents`
- **Method**: `GET`
- **Description**: Retrieves the list of agents with their assigned tickets.

### `/api/admin/tickets`
- **Method**: `GET`
- **Description**: Retrieves the list of tickets, filtered by status and priority.

### `/api/admin/users`
- **Method**: `GET`
- **Description**: Retrieves the list of users.

### `/api/auth/login`
- **Method**: `POST`
- **Description**: Authenticates users.

### `/api/tickets`
- **Methods**: `GET`, `POST`, `PUT/PATCH`, `DELETE`
- **Description**: Allows creating, listing, updating, and deleting tickets.


### `/api/comments`
- **Methods**: `GET`, `POST`
- **Description**: Retrieves comments from a ticket and allows adding new comments.

## Installation

### Requirements
- Node.js
- MongoDB (you can use MongoDB Atlas for a cloud database)
- Environment variables for configuration (see `.env.example`)

### Steps to run the project

1. Clone the repository:

``bash
git clone https://github.com/vcmvanesa7/HelpDeskProAssesment.git
```

2. Install the dependencies:

``bash
cd helpdeskpro
npm install
```

3. Configure the `.env.local` file with your MongoDB credentials and other necessary variables (e.g., Google keys for NextAuth):

``bash
MONGODB_URI=your-mongo-uri
NEXTAUTH_URL=http://localhost:3000 
NEXTAUTH_SECRET=your-secret-key 
GOOGLE_CLIENT_ID=your-google-client-id 
GOOGLE_CLIENT_SECRET=your-google-client-secret 
SMTP_HOST=your-smtp-host 
SMTP_USER=your-smtp-user 
SMTP_PASS=your-smtp-password 
```

4. Run the development server: 

```bash 
npm run dev 
```

5. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Coder Information

- **Name**: Vanesa Carrillo
- **Clan**: Riwi
- **Email**: vcmcontact1@gmail.com

---

This project is an exercise in optimizing technical support ticket management using Next.js, TypeScript, MongoDB, and cron jobs.