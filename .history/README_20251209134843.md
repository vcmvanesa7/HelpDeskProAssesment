
# HelpDeskPro - Admin Dashboard

## Descripción

**HelpDeskPro** es una aplicación web desarrollada para gestionar de manera eficiente los tickets de soporte de clientes y agentes dentro de la empresa. La aplicación permite a los usuarios crear, asignar, y gestionar tickets de soporte, mientras que los agentes pueden gestionar los tickets, responder y actualizar su estado.

## Tecnologías utilizadas

- **Next.js** (para la estructura de la aplicación y manejo de rutas)
- **React** (para la interfaz de usuario)
- **TypeScript** (tipado fuerte)
- **MongoDB** y **Mongoose** (para la base de datos)
- **NextAuth.js** (para autenticación con roles de usuarios)
- **Axios** (para las solicitudes a la API)
- **Material UI** (para la UI y componentes predefinidos)
- **Cron jobs** (para tareas programadas como recordatorios de tickets sin respuesta)

## Funcionalidades principales

### Gestión de Tickets
- Los **clientes** pueden crear nuevos tickets con título, descripción, prioridad, y estado.
- Los **agentes** pueden editar el estado de los tickets, asignar tickets a otros agentes y responder con comentarios.
- Los tickets tienen un **hilo de comentarios** para que tanto clientes como agentes puedan comunicarse.
- Los tickets se pueden listar y filtrar por estado y prioridad.

### Gestión de Usuarios y Autenticación
- Los usuarios se pueden autenticar mediante **NextAuth.js** utilizando credenciales o Google OAuth.
- Los **roles de usuarios** son: **client** (clientes), **agent** (agentes de soporte), y **admin** (administradores).
- Los usuarios son redirigidos a su panel de acuerdo con su rol.
- **Protección de rutas**: Los clientes solo pueden acceder a sus propios tickets, mientras que los agentes pueden acceder a todos los tickets.

### Envío de Correos
- **Correos automáticos** se envían al cliente cuando:
  - Se crea un ticket.
  - Un agente responde a un ticket.
  - Se cierra un ticket.

### Cron Jobs
- Un **cron job** ejecuta una tarea periódica para verificar los tickets sin respuesta y enviar recordatorios a los agentes asignados.

## Estructura del Proyecto

```bash
src/
├── app/
│   ├── admin/
│   │   ├── agents
│   │   ├── Dashboard.module.css
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   ├── support
│   │   └── users
│   ├── agent
│   ├── api
│   ├── auth
│   ├── favicon.ico
│   ├── globals.css
│   ├── LandingAnimated.tsx
│   ├── layout.tsx
│   ├── page.tsx
│   ├── profile
│   ├── providers.tsx
│   └── support
│       ├── [id]
│       ├── new
│       └── page.tsx
├── components
│   ├── clientToaster.tsx
│   ├── layout
│   ├── ui
├── lib
│   ├── auth.ts
│   ├── bcrypt.ts
│   ├── cloudinary.ts
│   ├── db.ts
│   ├── handleApiError.ts
│   ├── mailer.ts
│   └── validators
├── schemas
├── services
├── types
├── utils
└── tsconfig.json
```

## Endpoints de la API

### `/api/admin/agents`
- **Método**: `GET`
- **Descripción**: Obtiene la lista de agentes con los tickets asignados.

### `/api/admin/tickets`
- **Método**: `GET`
- **Descripción**: Obtiene la lista de tickets, filtrados por estado y prioridad.

### `/api/admin/users`
- **Método**: `GET`
- **Descripción**: Obtiene la lista de usuarios.

### `/api/auth/login`
- **Método**: `POST`
- **Descripción**: Realiza la autenticación de los usuarios.

### `/api/tickets`
- **Métodos**: `GET`, `POST`, `PUT/PATCH`, `DELETE`
- **Descripción**: Permite crear, listar, actualizar y eliminar tickets.

### `/api/comments`
- **Métodos**: `GET`, `POST`
- **Descripción**: Obtiene los comentarios de un ticket y permite agregar nuevos comentarios.

## Instalación

### Requisitos
- Node.js
- MongoDB (puedes usar MongoDB Atlas para una base de datos en la nube)
- Variables de entorno para configuración (consulta `.env.example`)

### Pasos para ejecutar el proyecto

1. Clona el repositorio:

   ```bash
   git clone https://github.com/vcmvanesa7/HelpDeskProAssesment.git
   ```

2. Instala las dependencias:

   ```bash
   cd helpdeskpro
   npm install
   ```

3. Configura el archivo `.env.local` con tus credenciales de MongoDB y otras variables necesarias (por ejemplo, claves de Google para NextAuth):

   ```bash
   MONGODB_URI=your-mongo-uri
   NEXTAUTH_URL=http://localhost:3000
   NEXTAUTH_SECRET=your-secret-key
   GOOGLE_CLIENT_ID=your-google-client-id
   GOOGLE_CLIENT_SECRET=your-google-client-secret
   SMTP_HOST=your-smtp-host
   SMTP_USER=your-smtp-user
   SMTP_PASS=your-smtp-password
   ```

4. Ejecuta el servidor de desarrollo:

   ```bash
   npm run dev
   ```

5. Abre [http://localhost:3000](http://localhost:3000) en tu navegador.

## Capturas de Pantalla

- **Creación de ticket** (cliente):
  ![Crear Ticket](./public/screenshots/create-ticket.png)

- **Gestión de tickets** (agente):
  ![Gestionar Ticket](./public/screenshots/manage-ticket.png)

- **Vista de comentarios**:
  ![Comentarios](./public/screenshots/ticket-comments.png)

## Datos del Coder

- **Nombre**: Vanesa Carrillo
- **Clan**: Riwi
- **Correo**: vanesa@example.com
- **Documento de identidad**: 123456789

---

Este proyecto es un ejercicio para la optimización de la gestión de tickets de soporte técnico mediante el uso de Next.js, TypeScript, MongoDB y cron jobs.
